# What has been updated?

## Changelog - (Added, Fixed, Removed):

1. Added new NUI menu for performing multiple actions - (playerlist & actions, tickets management, bans management, admin history actions).
2. Added ticket system to create a ticket to inform administrators - staff.

## Modified Files:

- REPLACE THE WHOLE SCRIPT, DO NOT KEEP ANYTHING FROM THE CURRENT ONE, DELETE AND PLACE.

## Notes

1. Update **TPZ-CORE** && **TPZ-INVENTORY** to latest! There have been some unreleased file updates for supporting the new Admin NUI. What you should update from both scripts are the **commands.lua** file and add the **new locale** (on both scripts) which is:

```lua
['COMMAND_HISTORY_ACTION_DESCRIPTION']    = "Executed Command: %s",
```

I also highly suggest replacing from both the API lua files to latest.

3. Add the following database tables related to the new update:

```lua

CREATE TABLE IF NOT EXISTS `admin_history` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `identifier` varchar(40) NOT NULL,
  `steamname` varchar(50) NOT NULL,
  `action` longtext NOT NULL,
  `date` varchar(50) NOT NULL,
  `timestamp` int(11) NOT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=DYNAMIC;

CREATE TABLE IF NOT EXISTS `admin_tickets` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `identifier` varchar(40) NOT NULL,
  `charidentifier` int(11) NOT NULL,
  `steamname` varchar(50) NOT NULL,
  `fullname` varchar(50) NOT NULL,
  `title` varchar(50) NOT NULL,
  `message` longtext NOT NULL,
  `exclamation` int(11) DEFAULT 0,
  `date` varchar(50) NOT NULL,
  `timestamp` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci ROW_FORMAT=DYNAMIC;

```

3. Search on `tpz_core\server\discord\webhooks.lua` the `tpz_admin` option and add a new option (TICKETS) above `['COMMANDS']`. It should look like this:
```lua
    ['tpz_admin'] = {
        ['TICKETS'] = "xxxxxxxxxxxxxx", -- <-- NEW
        ['COMMANDS'] = "xxxxxxxxxxxxxxxx",
        ['DEVTOOLS_INJECTION_CHEAT'] = "xxxxxxxxxxxxxxxxxxxxxxxxx",
    },
```
## Screenshots



<img width="1704" height="990" alt="image" src="https://github.com/user-attachments/assets/babe4a83-5f55-4551-8a0c-e6d8bf958dcd" />
<img width="1712" height="967" alt="image" src="https://github.com/user-attachments/assets/fbb31639-428f-4d9b-b94e-06ccd50d1309" />
<img width="1717" height="973" alt="image" src="https://github.com/user-attachments/assets/468e601d-2d6b-4765-abc6-e05210ec9b15" />
<img width="1714" height="979" alt="image" src="https://github.com/user-attachments/assets/da5951fb-7429-4865-93c4-5f12885cee5e" />
<img width="1720" height="983" alt="image" src="https://github.com/user-attachments/assets/bba43196-8ace-4c2e-8e10-4c1d10961bc5" />
<img width="1699" height="965" alt="image" src="https://github.com/user-attachments/assets/ab887dfe-f262-4795-a68f-e7558ab57d81" />
<img width="1711" height="973" alt="image" src="https://github.com/user-attachments/assets/9ee63e20-e36c-4d2e-a061-670b7257d49b" />
<img width="1185" height="824" alt="image" src="https://github.com/user-attachments/assets/913d1404-3c87-434c-a49b-044709323d85" />
